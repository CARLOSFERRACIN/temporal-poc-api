# Temporal Dynamic Configuration
# https://docs.temporal.io/references/dynamic-configuration
#
# Este arquivo habilita Nexus no Temporal Server.
# O arquivo é montado no docker-compose.yml e referenciado via
# DYNAMIC_CONFIG_FILE_PATH=/etc/temporal/config/dynamicconfig/docker.yaml

# Habilita operações Nexus no servidor
system.enableNexus:
  - value: true
    constraints: {}

# Nexus callback endpoint configuration
# O Temporal Server requer essa configuração para processar callbacks
# O Worker processa via polling, mas o servidor precisa saber para onde enviar callbacks
# Usando o endpoint HTTP interno do Temporal Server
component.nexusoperations.callback.endpoint.template:
  - value: "http://127.0.0.1:7243/namespaces/{{.NamespaceName}}/nexus/callback"
    constraints: {}

# Permite callbacks de qualquer endereço (apenas para desenvolvimento)
component.callbacks.allowedAddresses:
  - value:
      - Pattern: "*"
        AllowInsecure: true
